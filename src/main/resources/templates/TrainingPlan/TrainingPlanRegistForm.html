<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset=" UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="author" content="생로병사"/>
<meta name="description" content="TrainingPlanWriteForm"/>
<title>책임GYM</title>
</head>
<body>
<form action="trainingPlanRegist" method="post" enctype="multipart/form-data">
    <table>
        <caption>견적서 등록</caption>
        <tr>
            <th>아이디</th>
            <td><input type="text" name="trainingPlanId" th:value="${session.login.memberId}"></td>
        </tr>
        <tr>
            <th>운동목적</th>
            <td><select name="trainingPlanPurpose">
                <option th:value="벌크업" th:text="벌크업"></option>
                <option th:value="다이어트" th:text="다이어트"></option>
            </select>
            </td>
        </tr>
        <tr>
            <th>등급</th>
           <td><input type="button" onclick="sendGrade('초급')" id="beginner" name="trainingPlanGrade" th:value="초급">
           <input type="button" onclick="sendGrade('중급')" id="expert" name="trainingPlanGrade" th:value="중급"></td>
           
          
        </tr>
        
        
        <tr>
            <th>운동루틴</th>
            <td><input type="text" name="trainingPlanMyRoutineCode"></td>
        </tr>
        <tr>
            <th>식단</th>
            <td><input type="text" name="trainingPlanMyMealCode"></td>
        </tr>
        <tr>
            <td>
                <input type="submit" value="제출">
                <input type="reset" value="다시작성">
            </td>
        </tr>
    </table>
    
     <div id = "sendGradeView"></div>
    
</form>
</body>

<script src = "https://code.jquery.com/jquery-latest.js"></script>
<script th:inline ="javascript">
    function sendGrade(grade){
    	const sendGradeView = document.getElementById('sendGradeView');
    	const beginner = '초급';
    	const expert = '중급';
        $.ajax({
            url:"ajax/sendGrade",
            type:"GET",
            dataType:"text",
            data:{"trainingPlanGrade":grade},
            success:function(result){
                if(grade == beginner){
                	showBeginner(result);
                } else if(grade == expert){
                	showExpert(result);
                }
                
            },
            error:function(request, status, error){

        		alert("code:"+request.status+"\n"+"message:"+request.responseText+"\n"+"error:"+error);

        	}
        });

    }
    
    
    function showBeginner(result){
    	
    	console.log(result);
    	var output = "";
    	output += "<div>";
    	for(var i in result){
    		output += "<button>"+result[i].easyTrainingCode+"</button>";
    	}
    	output += "</div>";
    	
    	
    	var sendGradeView = document.getElementById('sendGradeView');
    	sendGradeView.innerHTML = output;
   
    }
    
    
    
</script>
</html>